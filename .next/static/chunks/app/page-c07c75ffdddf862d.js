(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2830:function(e,a,t){Promise.resolve().then(t.bind(t,1477))},1477:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return i}});var n=t(7437),o=t(2265),r=e=>{let{selectedType:a,onTypeChange:t,isDarkMode:o}=e;return(0,n.jsxs)("div",{className:"inline-flex rounded-lg ".concat(o?"bg-gray-700":"bg-gray-200"," p-1"),children:[(0,n.jsx)("button",{className:"px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ".concat("android"===a?o?"bg-blue-600 text-white":"bg-white text-gray-800 shadow":o?"text-gray-300 hover:bg-gray-600":"text-gray-600 hover:bg-gray-100"),onClick:()=>t("android"),children:"Android"}),(0,n.jsx)("button",{className:"px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ".concat("ios"===a?o?"bg-blue-600 text-white":"bg-white text-gray-800 shadow":o?"text-gray-300 hover:bg-gray-600":"text-gray-600 hover:bg-gray-100"),onClick:()=>t("ios"),children:"iOS"})]})},c=e=>{let{iconType:a,uploadedImage:t,settings:r,isDarkMode:c,onDownload:l}=e,s=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(t&&s.current){let e=s.current,a=e.getContext("2d");if(!a)return;let n=new Image;n.onload=()=>{let t,o,c,l;e.width=512,e.height=512,a.clearRect(0,0,e.width,e.height),a.fillStyle=r.background.color,a.fillRect(0,0,e.width,e.height);let s=512-2*r.padding;if("center"===r.scaling){let e=Math.min(s/n.width,s/n.height);c=n.width*e,l=n.height*e,t=(s-c)/2+r.padding,o=(s-l)/2+r.padding}else{let e=Math.max(s/n.width,s/n.height);c=s,l=s,t=(n.width*e-s)/2/e+r.padding,o=(n.height*e-s)/2/e+r.padding}if(a.drawImage(n,t,o,c,l,r.padding,r.padding,s,s),"square"!==r.shape){if(a.globalCompositeOperation="destination-in",a.beginPath(),"circle"===r.shape)a.arc(256,256,(512-2*r.padding)/2,0,2*Math.PI);else if("squircle"===r.shape){let e=new Path2D("\n              M ".concat(r.padding," ").concat(256,"\n              C ").concat(r.padding," ").concat(r.padding,", ").concat(r.padding," ").concat(r.padding,", ").concat(256," ").concat(r.padding,"\n              C ").concat(512-r.padding," ").concat(r.padding,", ").concat(512-r.padding," ").concat(r.padding,", ").concat(512-r.padding," ").concat(256,"\n              C ").concat(512-r.padding," ").concat(512-r.padding,", ").concat(512-r.padding," ").concat(512-r.padding,", ").concat(256," ").concat(512-r.padding,"\n              C ").concat(r.padding," ").concat(512-r.padding,", ").concat(r.padding," ").concat(512-r.padding,", ").concat(r.padding," ").concat(256,"\n            "));a.fill(e)}a.fill(),a.globalCompositeOperation="source-over"}if("shadow"===r.effect)a.shadowColor="rgba(0, 0, 0, 0.5)",a.shadowBlur=20,a.shadowOffsetX=10,a.shadowOffsetY=10,a.drawImage(e,0,0),a.shadowColor="transparent";else if("gloss"===r.effect){let t=a.createLinearGradient(0,0,0,e.height);t.addColorStop(0,"rgba(255, 255, 255, 0.4)"),t.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),t.addColorStop(.5,"rgba(255, 255, 255, 0)"),t.addColorStop(1,"rgba(255, 255, 255, 0.1)"),a.fillStyle=t,a.fillRect(0,0,e.width,e.height)}},n.src=URL.createObjectURL(t)}},[t,r]),(0,n.jsxs)("div",{className:"p-6 rounded-lg shadow-lg ".concat(c?"bg-gray-800":"bg-white"),children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4 ".concat(c?"text-white":"text-gray-800"),children:"Icon Preview"}),(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsxs)("div",{className:"mb-4 text-center",children:[(0,n.jsxs)("p",{className:"text-lg ".concat(c?"text-gray-300":"text-gray-600"),children:["android"===a?"Android":"iOS"," Icon"]}),(0,n.jsx)("p",{className:"text-sm ".concat(c?"text-gray-400":"text-gray-500"),children:"512x512 px"})]}),(0,n.jsx)("div",{className:"flex justify-center items-center w-64 h-64 bg-gray-200 rounded-lg overflow-hidden",children:t?(0,n.jsx)("canvas",{ref:s,className:"max-w-full max-h-full"}):(0,n.jsxs)("p",{className:"text-center ".concat(c?"text-gray-400":"text-gray-600"),children:["Upload an image",(0,n.jsx)("br",{}),"to see the preview"]})}),t&&(0,n.jsxs)("div",{className:"mt-4 text-center",children:[(0,n.jsxs)("p",{className:"text-sm ".concat(c?"text-gray-400":"text-gray-500"),children:["Shape: ",r.shape.charAt(0).toUpperCase()+r.shape.slice(1)]}),(0,n.jsxs)("p",{className:"text-sm ".concat(c?"text-gray-400":"text-gray-500"),children:["Effect: ",r.effect.charAt(0).toUpperCase()+r.effect.slice(1)]})]}),t&&(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)("button",{onClick:l,className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 transition-all duration-200 transform hover:scale-105",children:"Download Icons"})})]})]})},l=e=>{let{settings:a,onSettingsChange:t,isDarkMode:o}=e,r="w-full px-3 py-2 rounded-md ".concat(o?"bg-gray-700 text-white":"bg-white text-gray-800"," border ").concat(o?"border-gray-600":"border-gray-300"," focus:outline-none focus:ring-2 focus:ring-blue-500"),c="block mb-2 font-medium ".concat(o?"text-gray-200":"text-gray-700"),l="".concat(r," appearance-none");return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:c,htmlFor:"scalingSelect",children:"Scaling"}),(0,n.jsxs)("select",{id:"scalingSelect",value:a.scaling,onChange:e=>t({scaling:e.target.value}),className:l,children:[(0,n.jsx)("option",{value:"center",children:"Center"}),(0,n.jsx)("option",{value:"crop",children:"Crop"})]})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{className:c,children:[(0,n.jsx)("input",{type:"checkbox",checked:a.mask,onChange:e=>t({mask:e.target.checked}),className:"mr-2 rounded"}),"Apply Mask"]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:c,htmlFor:"effectSelect",children:"Effect"}),(0,n.jsxs)("select",{id:"effectSelect",value:a.effect,onChange:e=>t({effect:e.target.value}),className:l,"aria-label":"Effect",children:[(0,n.jsx)("option",{value:"none",children:"None"}),(0,n.jsx)("option",{value:"shadow",children:"Shadow"}),(0,n.jsx)("option",{value:"gloss",children:"Gloss"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:c,htmlFor:"paddingInput",children:"Padding"}),(0,n.jsx)("input",{id:"paddingInput",type:"number",value:a.padding,onChange:e=>t({padding:Math.max(0,Math.min(100,parseInt(e.target.value,10)||0))}),className:r,min:"0",max:"100","aria-label":"Padding"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:c,htmlFor:"bgColor",children:"Background Color"}),(0,n.jsx)("input",{id:"bgColor",type:"color",value:a.background.color,onChange:e=>t({background:{color:e.target.value}}),className:"".concat(r," h-10"),"aria-label":"Background Color"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:c,children:"Shape"}),(0,n.jsxs)("select",{value:a.shape,onChange:e=>t({shape:e.target.value}),className:l,"aria-label":"Shape",children:[(0,n.jsx)("option",{value:"square",children:"Square"}),(0,n.jsx)("option",{value:"circle",children:"Circle"}),(0,n.jsx)("option",{value:"squircle",children:"Squircle"})]})]})]})},s=e=>{let{onFileUpload:a,isDarkMode:t}=e,r=(0,o.useRef)(null);return(0,n.jsxs)("div",{className:"w-full p-6 mb-6 border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-300 ".concat(t?"bg-gray-800 border-gray-600 hover:bg-gray-700":"bg-gray-50 border-gray-300 hover:bg-gray-100"),onDragOver:e=>{e.preventDefault()},onDrop:e=>{var t;e.preventDefault();let n=null===(t=e.dataTransfer.files)||void 0===t?void 0:t[0];n&&a(n)},onClick:()=>{var e;null===(e=r.current)||void 0===e||e.click()},children:[(0,n.jsx)("input",{type:"file",ref:r,onChange:e=>{var t;let n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&a(n)},accept:"image/*",className:"hidden","aria-label":"Upload file"}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("svg",{className:"mx-auto h-12 w-12 ".concat(t?"text-gray-400":"text-gray-500"),stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:(0,n.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,n.jsxs)("p",{className:"mt-1 text-sm ".concat(t?"text-gray-300":"text-gray-600"),children:[(0,n.jsx)("span",{className:"font-medium",children:"Click to upload"})," or drag and drop"]}),(0,n.jsx)("p",{className:"mt-1 text-xs ".concat(t?"text-gray-400":"text-gray-500"),children:"PNG, JPG, GIF up to 10MB"})]})]})};function i(){let[e,a]=(0,o.useState)("android"),[t,i]=(0,o.useState)(!1),[d,g]=(0,o.useState)(null),[h,p]=(0,o.useState)({scaling:"center",mask:!1,effect:"none",padding:0,background:{color:"#000000"},shape:"square"}),u=async()=>{if(console.log("Download button clicked"),!d){console.error("No image uploaded");return}try{let a=new FormData;a.append("file",d),a.append("settings",JSON.stringify(h)),a.append("iconType",e),console.log("Sending request to generate icons");let t=await fetch("/api/generate-icons",{method:"POST",body:a});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let n=t.headers.get("Content-Disposition"),o=n&&n.match(/filename="?(.+)"?/i),r=o?o[1]:"generated-icons.zip",c=await t.blob(),l=window.URL.createObjectURL(c),s=document.createElement("a");s.href=l,s.download=r,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(l),console.log("Download completed")}catch(e){console.error("Error in handleDownload:",e),alert("An error occurred while generating icons. Please try again later.")}};return(0,n.jsx)("div",{className:"min-h-screen ".concat(t?"dark bg-gray-900":"bg-gray-100"),children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsxs)("header",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold mb-4 ".concat(t?"text-white":"text-gray-800"),children:"Icon Generator"}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)(r,{selectedType:e,onTypeChange:a,isDarkMode:t}),(0,n.jsx)("button",{onClick:()=>{i(!t)},className:"px-6 py-3 font-semibold rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-opacity-75 transition-all duration-200 transform hover:scale-105 ".concat(t?"bg-white text-black hover:bg-gray-800 focus:ring-gray-700":"bg-black text-white hover:bg-gray-100 focus:ring-gray-200"),children:t?"Light Mode":"Dark Mode"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,n.jsx)("div",{className:"lg:col-span-1",children:(0,n.jsxs)("div",{className:"p-6 rounded-lg shadow-lg ".concat(t?"bg-gray-800":"bg-white"),children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4 ".concat(t?"text-white":"text-gray-800"),children:"Upload Icon"}),(0,n.jsx)(s,{onFileUpload:e=>{g(e),console.log("Image uploaded:",e.name)},isDarkMode:t}),(0,n.jsx)(l,{settings:h,onSettingsChange:e=>{p(a=>{var t;return{...a,...e,padding:"string"==typeof e.padding?parseInt(e.padding,10):null!==(t=e.padding)&&void 0!==t?t:a.padding,background:{...a.background,...e.background||{}}}})},isDarkMode:t})]})}),(0,n.jsx)("div",{className:"lg:col-span-2",children:(0,n.jsx)(c,{iconType:e,uploadedImage:d,settings:h,isDarkMode:t,onDownload:u})})]})]})})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2830)}),_N_E=e.O()}]);